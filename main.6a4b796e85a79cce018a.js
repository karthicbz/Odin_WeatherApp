(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var a=n.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=(()=>{const e=document.createElement("div");e.id="inputContainer";const t=document.createElement("input");t.type="text",t.className="city-input",t.name="city-input",e.appendChild(t);const n=document.createElement("button");return n.className="weather-search",n.textContent="Search",e.appendChild(n),e})(),n={weatherData:async function(e,t){try{const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&APPID=228a3f9fe276acdf8c030f707cddc96f`,{mode:"cors"});if(404!==n.status)return await n.json();alert("city not found")}catch(e){console.log(e)}}},a={hourlyWeatherData:async function(e,t){try{const n=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${e}&units=${t}&appid=228a3f9fe276acdf8c030f707cddc96f`);if(404!==n.status)return await n.json();alert("city not found")}catch(e){console.log(e)}}},r=(e,t=null,n=null,a=null,r=null,c=null)=>"input"===e?i.formElementCreator(e,t,n,a):"img"!==e?i.creator(e,t,n,a):i.imageElementCreator(e,t,n,a,r,c),c=(e,t=null,n=null)=>{const a=document.createElement("div");return null!==t&&a.classList.add(t),null!==n&&a.setAttribute("id",`${n}`),e.forEach((e=>{const[t,n,c,i,o,l]=e;a.appendChild(r(t,n,c,i,o,l))})),a},i=(()=>{const e=(e,t,n,a)=>{const r=document.createElement(e);return null!==t&&r.classList.add(t),null!==n&&r.setAttribute("id",`${n}`),"input"!==e?"span"===e?null!==a&&(r.innerHTML=a):null!==a&&(r.textContent=a):r.type=a,r};return{creator:e,imageElementCreator:(t,n,a,r,c,i)=>{const o=e(t,n,a,r);return null!==i&&(o.alt=i),null!==c&&(o.src=c),o},formElementCreator:(t,n,a,r)=>e(t,n,a,r)}})(),o=(()=>{const e=document.createElement("div");e.id="weatherContainer";const t=c([["p","cityName"]],"weather-header"),n=c([["button","metric",null,"C"],["button","imperial",null,"F"]],"units");t.append(n);const a=document.createElement("div");a.className="weather-details";const i=document.createElement("img");i.className="weather-img",i.src="#",a.appendChild(i);const o=document.createElement("p");o.className="main-weather",a.appendChild(o);const l=document.createElement("div");l.className="other-details";const s=document.createElement("p");s.className="weather-text",l.appendChild(s);const u=c([["p","max-temp",null],["p","min-temp",null],["p","visibility",null],["p","humidity",null]],"other-weather-info"),d=r("div","hourly-weather");for(let e=0;e<40;e++){const t=c([["p","day"],["img","weather-img"],["p","min-max"],["p","desc"]],"hourly-weather-"+e);d.appendChild(t)}const m=r("img","loader-image");return e.appendChild(t),e.appendChild(a),e.appendChild(l),e.appendChild(u),e.appendChild(d),e.appendChild(m),e})(),l=e.p+"bb036aaf0388f2d90df9db1855848943.gif",s=document.querySelector("#content");s.appendChild(t),s.appendChild(o);const u=document.querySelector(".city-input"),d=document.querySelector(".weather-search"),m=document.querySelector(".main-weather"),p=document.querySelector(".weather-img"),h=document.querySelector(".weather-header>.units"),y=document.querySelector(".cityName"),w=document.querySelector("#weatherContainer>.loader-image");w.src=l;let f={unit:"metric",symbol:"C"};d.addEventListener("click",(()=>{""!==u.value?(C(u.value,f.unit),$(u.value,f.unit)):alert("city name must not be empty")}));const g=(e,t)=>{const n=document.querySelectorAll(".other-weather-info>p"),[a,r,c,i]=Array.from(n);a.innerHTML=`Max: ${e.main.temp_max}<span class='units'>&#176;${t}</span>`,r.innerHTML=`Min: ${e.main.temp_min}<span class='units'>&#176;${t}</span>`,c.textContent=`Visibility: ${Math.floor(e.visibility/1e3)}km`,i.textContent=`Humidity: ${e.main.humidity}%`},C=(e,t)=>{w.classList.add("show_loader"),n.weatherData(e,t).then((function(e){((e,t)=>{y.innerHTML=`${e.name}<span>, ${e.sys.country}</span>`,m.innerHTML=`${e.main.temp}<span class='units'>&#176;${t}</span>`,p.src=`http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`,document.querySelector(".weather-text").innerHTML=`Feels like ${e.main.feels_like}<span>&#176;${t}</span>. ${e.weather[0].description}`,g(e,t)})(e,f.symbol),w.classList.remove("show_loader")})).catch((e=>{console.log(e)}))},$=(e,t)=>{a.hourlyWeatherData(e,t).then((function(e){b(e.list,f.symbol)})).catch((e=>{console.log(e)}))},b=(e,t)=>{document.querySelectorAll(".hourly-weather>div").forEach((n=>{let a=Number(n.className.slice(-1));const[r,c,i,o]=Array.from(n.childNodes),l=new Date(1e3*e[a].dt);r.textContent=l.toDateString().replace("2023",""),c.src=`http://openweathermap.org/img/wn/${e[a].weather[0].icon}.png`,i.innerHTML=`${e[a].main.temp}<span>&#176;${t}</span>`,o.textContent=e[a].weather[0].description}))};window.addEventListener("load",(()=>{C("london",f.unit),$("london",f.unit),document.querySelector(".units>.metric").classList.add("selected")})),h.addEventListener("click",(e=>{document.querySelectorAll(".units>button").forEach((e=>{e.classList.remove("selected")})),f.unit=e.target.className;let t=y.textContent.split(",");C(t[0],f.unit),$(t[0],f.unit),"metric"===e.target.className?f.symbol="C":f.symbol="F",e.target.classList.add("selected")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi42YTRiNzk2ZTg1YTc5Y2NlMDE4YS5qcyIsIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0FBQyxFQ0QzQkEsRUFBb0JDLEVBQUksV0FDdkIsR0FBMEIsaUJBQWZDLFdBQXlCLE9BQU9BLFdBQzNDLElBQ0MsT0FBT0MsTUFBUSxJQUFJQyxTQUFTLGNBQWIsRUFDaEIsQ0FBRSxNQUFPQyxHQUNSLEdBQXNCLGlCQUFYQyxPQUFxQixPQUFPQSxNQUN4QyxDQUNBLENBUHVCLEcsTUNBeEIsSUFBSUMsRUFDQVAsRUFBb0JDLEVBQUVPLGdCQUFlRCxFQUFZUCxFQUFvQkMsRUFBRVEsU0FBVyxJQUN0RixJQUFJQyxFQUFXVixFQUFvQkMsRUFBRVMsU0FDckMsSUFBS0gsR0FBYUcsSUFDYkEsRUFBU0MsZ0JBQ1pKLEVBQVlHLEVBQVNDLGNBQWNDLE1BQy9CTCxHQUFXLENBQ2YsSUFBSU0sRUFBVUgsRUFBU0kscUJBQXFCLFVBQ3pDRCxFQUFRRSxTQUFRUixFQUFZTSxFQUFRQSxFQUFRRSxPQUFTLEdBQUdILElBQzVELENBSUQsSUFBS0wsRUFBVyxNQUFNLElBQUlTLE1BQU0seURBQ2hDVCxFQUFZQSxFQUFVVSxRQUFRLE9BQVEsSUFBSUEsUUFBUSxRQUFTLElBQUlBLFFBQVEsWUFBYSxLQUNwRmpCLEVBQW9Ca0IsRUFBSVgsQyxLQ2Z4QixNQUFNWSxFQUFpQixNQUNuQixNQUFNQyxFQUFZVixTQUFTVyxjQUFjLE9BQ3pDRCxFQUFVRSxHQUFLLGlCQUVmLE1BQU1DLEVBQWFiLFNBQVNXLGNBQWMsU0FDMUNFLEVBQVdDLEtBQU8sT0FDbEJELEVBQVdFLFVBQVksYUFDdkJGLEVBQVdHLEtBQU8sYUFDbEJOLEVBQVVPLFlBQVlKLEdBRXRCLE1BQU1LLEVBQVNsQixTQUFTVyxjQUFjLFVBS3RDLE9BSkFPLEVBQU9ILFVBQVksaUJBQ25CRyxFQUFPQyxZQUFjLFNBQ3JCVCxFQUFVTyxZQUFZQyxHQUVmUixDQUNWLEVBaEJzQixHQ0FqQlUsRUFpQkcsQ0FBRUMsWUFoQlRDLGVBQTJCQyxFQUFVQyxHQUNuQyxJQUNFLE1BQU1DLFFBQWlCQyxNQUNyQixxREFBcURILFdBQWtCQywyQ0FDdkUsQ0FBRUcsS0FBTSxTQUVWLEdBQXdCLE1BQXBCRixFQUFTRyxPQUVYLGFBRHVCSCxFQUFTSSxPQUdoQ0MsTUFBTSxpQkFFVixDQUFFLE1BQU9DLEdBQ1BDLFFBQVFDLElBQUlGLEVBQ2QsQ0FDRixHQUlJRyxFQWdCRyxDQUFFQyxrQkFmVGIsZUFBaUNDLEVBQVVDLEdBQ3pDLElBQ0UsTUFBTUMsUUFBaUJDLE1BQ3JCLHNEQUFzREgsV0FBa0JDLDRDQUUxRSxHQUF3QixNQUFwQkMsRUFBU0csT0FFWCxhQUR1QkgsRUFBU0ksT0FHaENDLE1BQU0saUJBRVYsQ0FBRSxNQUFPQyxHQUNQQyxRQUFRQyxJQUFJRixFQUNkLENBQ0YsR0NuQ0lwQixFQUFnQixDQUFDeUIsRUFBU3JCLEVBQVUsS0FBTXNCLEVBQU8sS0FBTUMsRUFBSyxLQUFNcEMsRUFBSSxLQUFNcUMsRUFBSSxPQUNuRSxVQUFaSCxFQUNRSSxFQUFlQyxtQkFBbUJMLEVBQVNyQixFQUFXc0IsRUFBUUMsR0FDcEQsUUFBWkYsRUFDRUksRUFBZUUsUUFBUU4sRUFBU3JCLEVBQVdzQixFQUFRQyxHQUduREUsRUFBZUcsb0JBQW9CUCxFQUFTckIsRUFBV3NCLEVBQVFDLEVBQU1wQyxFQUFLcUMsR0FJbkZLLEVBQVksQ0FBQ0MsRUFBUTlCLEVBQVUsS0FBTXNCLEVBQU8sUUFDOUMsTUFBTVMsRUFBVTlDLFNBQVNXLGNBQWMsT0FXdkMsT0FWaUIsT0FBZEksR0FDQytCLEVBQVFDLFVBQVVDLElBQUlqQyxHQUVaLE9BQVhzQixHQUNDUyxFQUFRRyxhQUFhLEtBQU0sR0FBR1osS0FFbENRLEVBQU9LLFNBQVFDLElBQ1gsTUFBT2YsRUFBU3JCLEVBQVdzQixFQUFRQyxFQUFNcEMsRUFBS3FDLEdBQU9ZLEVBQ3JETCxFQUFRN0IsWUFBWU4sRUFBY3lCLEVBQVNyQixFQUFXc0IsRUFBUUMsRUFBTXBDLEVBQUtxQyxHQUFLLElBRTNFTyxDQUFPLEVBR1pOLEVBQWlCLE1BQ25CLE1BQU1FLEVBQVUsQ0FBQ04sRUFBU3JCLEVBQVdzQixFQUFRQyxLQUN6QyxNQUFNUSxFQUFVOUMsU0FBU1csY0FBY3lCLEdBb0J2QyxPQW5CaUIsT0FBZHJCLEdBQ0MrQixFQUFRQyxVQUFVQyxJQUFJakMsR0FFWixPQUFYc0IsR0FDQ1MsRUFBUUcsYUFBYSxLQUFNLEdBQUdaLEtBRW5CLFVBQVpELEVBQ2dCLFNBQVpBLEVBQ2EsT0FBVEUsSUFDQ1EsRUFBUU0sVUFBWWQsR0FHWixPQUFUQSxJQUNDUSxFQUFRM0IsWUFBY21CLEdBSTlCUSxFQUFRaEMsS0FBT3dCLEVBRVpRLENBQU8sRUEyQmxCLE1BQU8sQ0FBQ0osVUFBU0Msb0JBeEJXLENBQUNQLEVBQVNyQixFQUFXc0IsRUFBUUMsRUFBTXBDLEVBQUtxQyxLQVNoRSxNQUFNTyxFQUFVSixFQUFRTixFQUFTckIsRUFBV3NCLEVBQVFDLEdBT3BELE9BTlcsT0FBUkMsSUFDQ08sRUFBUVAsSUFBTUEsR0FFUCxPQUFSckMsSUFDQzRDLEVBQVE1QyxJQUFNQSxHQUVYNEMsQ0FBTyxFQVFvQkwsbUJBTFgsQ0FBQ0wsRUFBU3JCLEVBQVdzQixFQUFRdkIsSUFDcEM0QixFQUFRTixFQUFTckIsRUFBV3NCLEVBQVF2QixHQUszRCxFQWxEc0IsR0N0QmpCdUMsRUFBbUIsTUFDdkIsTUFBTTNDLEVBQVlWLFNBQVNXLGNBQWMsT0FDekNELEVBQVVFLEdBQUssbUJBRWYsTUFBTTBDLEVBQWdCVixFQUFVLENBQUMsQ0FBQyxJQUFLLGFBQWMsa0JBQy9DVyxFQUFjWCxFQUNsQixDQUNFLENBQUMsU0FBVSxTQUFVLEtBQU0sS0FDM0IsQ0FBQyxTQUFVLFdBQVksS0FBTSxNQUUvQixTQUVGVSxFQUFjRSxPQUFPRCxHQUVyQixNQUFNRSxFQUFpQnpELFNBQVNXLGNBQWMsT0FDOUM4QyxFQUFlMUMsVUFBWSxrQkFFM0IsTUFBTTJDLEVBQWUxRCxTQUFTVyxjQUFjLE9BQzVDK0MsRUFBYTNDLFVBQVksY0FDekIyQyxFQUFheEQsSUFBTSxJQUNuQnVELEVBQWV4QyxZQUFZeUMsR0FFM0IsTUFBTUMsRUFBYzNELFNBQVNXLGNBQWMsS0FDM0NnRCxFQUFZNUMsVUFBWSxlQUN4QjBDLEVBQWV4QyxZQUFZMEMsR0FFM0IsTUFBTUMsRUFBc0I1RCxTQUFTVyxjQUFjLE9BQ25EaUQsRUFBb0I3QyxVQUFZLGdCQUVoQyxNQUFNOEMsRUFBYzdELFNBQVNXLGNBQWMsS0FDM0NrRCxFQUFZOUMsVUFBWSxlQUN4QjZDLEVBQW9CM0MsWUFBWTRDLEdBRWhDLE1BQU1DLEVBQW1CbEIsRUFDdkIsQ0FDRSxDQUFDLElBQUssV0FBWSxNQUNsQixDQUFDLElBQUssV0FBWSxNQUNsQixDQUFDLElBQUssYUFBYyxNQUNwQixDQUFDLElBQUssV0FBWSxPQUVwQixzQkFHSW1CLEVBQXlCcEQsRUFBYyxNQUFPLGtCQUNwRCxJQUFLLElBQUlxRCxFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFBSyxDQUMzQixNQUFNQyxFQUFnQnJCLEVBQ3BCLENBQ0UsQ0FBQyxJQUFLLE9BQ04sQ0FBQyxNQUFPLGVBQ1IsQ0FBQyxJQUFLLFdBQ04sQ0FBQyxJQUFLLFNBRVIsa0JBQW9Cb0IsR0FFdEJELEVBQXVCOUMsWUFBWWdELEVBQ3JDLENBRUEsTUFBTUMsRUFBZXZELEVBQWMsTUFBTyxnQkFTMUMsT0FQQUQsRUFBVU8sWUFBWXFDLEdBQ3RCNUMsRUFBVU8sWUFBWXdDLEdBQ3RCL0MsRUFBVU8sWUFBWTJDLEdBQ3RCbEQsRUFBVU8sWUFBWTZDLEdBQ3RCcEQsRUFBVU8sWUFBWThDLEdBQ3RCckQsRUFBVU8sWUFBWWlELEdBRWZ4RCxDQUNSLEVBbkV3QixHQ0p6QixFQUFlLElBQTBCLHVDQ01uQ3lELEVBQVVuRSxTQUFTb0UsY0FBYyxZQUV2Q0QsRUFBUWxELFlBQVlSLEdBQ3BCMEQsRUFBUWxELFlBQVlvQyxHQUVwQixNQUFNZ0IsRUFBY3JFLFNBQVNvRSxjQUFjLGVBQ3JDRSxFQUFldEUsU0FBU29FLGNBQWMsbUJBQ3RDVCxFQUFjM0QsU0FBU29FLGNBQWMsaUJBQ3JDRyxFQUFtQnZFLFNBQVNvRSxjQUFjLGdCQUMxQ0ksRUFBUXhFLFNBQVNvRSxjQUFjLDBCQUMvQjdDLEVBQVd2QixTQUFTb0UsY0FBYyxhQUNsQ0ssRUFBU3pFLFNBQVNvRSxjQUFjLG1DQUN0Q0ssRUFBT3ZFLElBQU0sRUFFYixJQUFJd0UsRUFBZSxDQUFDbEQsS0FBTSxTQUFVbUQsT0FBUSxLQUU1Q0wsRUFBYU0saUJBQWlCLFNBQVMsS0FDVixLQUF0QlAsRUFBWWxCLE9BQ1gwQixFQUFrQlIsRUFBWWxCLE1BQU91QixFQUFhbEQsTUFDbERzRCxFQUF3QlQsRUFBWWxCLE1BQU91QixFQUFhbEQsT0FFeERNLE1BQU0sOEJBQ1YsSUFHSixNQVFNaUQsRUFBa0IsQ0FBQ0MsRUFBTXhELEtBQzNCLE1BQU15RCxFQUFZakYsU0FBU2tGLGlCQUFpQiwwQkFDckNDLEVBQVNDLEVBQVNDLEVBQVlDLEdBQVlDLE1BQU1DLEtBQUtQLEdBQzVERSxFQUFRL0IsVUFBWSxRQUFRNEIsRUFBS1MsS0FBS0MscUNBQXFDbEUsV0FDM0U0RCxFQUFRaEMsVUFBWSxRQUFRNEIsRUFBS1MsS0FBS0UscUNBQXFDbkUsV0FDM0U2RCxFQUFXbEUsWUFBYyxlQUFleUUsS0FBS0MsTUFBTWIsRUFBS0ssV0FBVyxTQUNuRUMsRUFBU25FLFlBQWMsYUFBYTZELEVBQUtTLEtBQUtILFdBQVcsRUFHdkRULEVBQW9CLENBQUMxQixFQUFPM0IsS0FDOUJpRCxFQUFPMUIsVUFBVUMsSUFBSSxlQUNyQjVCLEVBQWVDLFlBQVk4QixFQUFPM0IsR0FDakNzRSxNQUFLLFNBQVNkLEdBcEJXLEVBQUNBLEVBQU14RCxLQUNqQ0QsRUFBUzZCLFVBQVksR0FBRzRCLEVBQUtoRSxlQUFlZ0UsRUFBS2UsSUFBSUMsaUJBQ3JEckMsRUFBWVAsVUFBWSxHQUFHNEIsRUFBS1MsS0FBS1EsaUNBQWlDekUsV0FDdEUrQyxFQUFpQnJFLElBQU0sb0NBQW9DOEUsRUFBS2tCLFFBQVEsR0FBR0MsY0FDM0VuRyxTQUFTb0UsY0FBYyxpQkFBaUJoQixVQUFZLGNBQWM0QixFQUFLUyxLQUFLVyx5QkFBeUI1RSxhQUFnQndELEVBQUtrQixRQUFRLEdBQUdHLGNBQ3JJdEIsRUFBZ0JDLEVBQU14RCxFQUFLLEVBaUJ2QjhFLENBQXNCdEIsRUFBTU4sRUFBYUMsUUFDekNGLEVBQU8xQixVQUFVd0QsT0FBTyxjQUM1QixJQUNDQyxPQUFNQyxJQUNIekUsUUFBUUMsSUFBSXdFLEVBQUksR0FDbkIsRUFHQzNCLEVBQTBCLENBQUMzQixFQUFPM0IsS0FDcENVLEVBQXFCQyxrQkFBa0JnQixFQUFPM0IsR0FDN0NzRSxNQUFLLFNBQVNkLEdBRVgwQixFQUE0QjFCLEVBQUsyQixLQUFNakMsRUFBYUMsT0FDeEQsSUFDQzZCLE9BQU1DLElBQ0h6RSxRQUFRQyxJQUFJd0UsRUFBSSxHQUNuQixFQUdDQyxFQUE4QixDQUFDMUIsRUFBTXhELEtBQ3ZDeEIsU0FBU2tGLGlCQUFpQix1QkFBdUJoQyxTQUFRMEQsSUFDckQsSUFBSUMsRUFBZUMsT0FBT0YsRUFBSTdGLFVBQVVnRyxPQUFPLElBQy9DLE1BQU9DLEVBQUtDLEVBQU9mLEVBQVNnQixHQUFlM0IsTUFBTUMsS0FBS29CLEVBQUlPLFlBQ3BEQyxFQUFPLElBQUlDLEtBQTZCLElBQXhCckMsRUFBSzZCLEdBQWNTLElBQ3pDTixFQUFJN0YsWUFBY2lHLEVBQUtHLGVBQWVoSCxRQUFRLE9BQVEsSUFFdEQwRyxFQUFNL0csSUFBTSxvQ0FBb0M4RSxFQUFLNkIsR0FBY1gsUUFBUSxHQUFHQyxXQUU5RUQsRUFBUTlDLFVBQVksR0FBRzRCLEVBQUs2QixHQUFjcEIsS0FBS1EsbUJBQW1CekUsV0FFbEUwRixFQUFZL0YsWUFBYzZELEVBQUs2QixHQUFjWCxRQUFRLEdBQUdHLFdBQVcsR0FDdEUsRUFHTHpHLE9BQU9nRixpQkFBaUIsUUFBUSxLQUM1QkMsRUFBa0IsU0FBVUgsRUFBYWxELE1BQ3pDc0QsRUFBd0IsU0FBVUosRUFBYWxELE1BQy9DeEIsU0FBU29FLGNBQWMsa0JBQWtCckIsVUFBVUMsSUFBSSxXQUFXLElBR3RFd0IsRUFBTUksaUJBQWlCLFNBQVVqRixJQUM3QkssU0FBU2tGLGlCQUFpQixpQkFBaUJoQyxTQUFRaEMsSUFDL0NBLEVBQU82QixVQUFVd0QsT0FBTyxXQUFXLElBRXZDN0IsRUFBYWxELEtBQU83QixFQUFFNkgsT0FBT3pHLFVBQzdCLElBQUlDLEVBQU9PLEVBQVNKLFlBQVlzRyxNQUFNLEtBQ3RDNUMsRUFBa0I3RCxFQUFLLEdBQUkwRCxFQUFhbEQsTUFDeENzRCxFQUF3QjlELEVBQUssR0FBSTBELEVBQWFsRCxNQUNwQixXQUF2QjdCLEVBQUU2SCxPQUFPekcsVUFDUjJELEVBQWFDLE9BQVMsSUFFdEJELEVBQWFDLE9BQVMsSUFFMUJoRixFQUFFNkgsT0FBT3pFLFVBQVVDLElBQUksV0FBVyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VhdGhlcl9hcHAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2VhdGhlcl9hcHAvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly93ZWF0aGVyX2FwcC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWF0aGVyX2FwcC8uL3NyYy9zY3JpcHRzL2lucHV0Q29udGFpbmVyLmpzIiwid2VicGFjazovL3dlYXRoZXJfYXBwLy4vc3JjL3NjcmlwdHMvd2VhdGhlckRhdGEuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlcl9hcHAvLi9zcmMvc2NyaXB0cy9lbGVtZW50X2NyZWF0b3IuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlcl9hcHAvLi9zcmMvc2NyaXB0cy93ZWF0aGVyQ29udGFpbmVyLmpzIiwid2VicGFjazovL3dlYXRoZXJfYXBwLy4vc3JjL2ltYWdlcy9naXJsX2p1bXBpbmcuZ2lmIiwid2VicGFjazovL3dlYXRoZXJfYXBwLy4vc3JjL3NjcmlwdHMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJjb25zdCBpbnB1dENvbnRhaW5lciA9ICgoKT0+e1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5pZCA9ICdpbnB1dENvbnRhaW5lcic7XG5cbiAgICBjb25zdCBpbnB1dEZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBpbnB1dEZpZWxkLnR5cGUgPSAndGV4dCc7XG4gICAgaW5wdXRGaWVsZC5jbGFzc05hbWUgPSAnY2l0eS1pbnB1dCc7XG4gICAgaW5wdXRGaWVsZC5uYW1lID0gJ2NpdHktaW5wdXQnXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0RmllbGQpO1xuXG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgYnV0dG9uLmNsYXNzTmFtZSA9ICd3ZWF0aGVyLXNlYXJjaCc7XG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1NlYXJjaCc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cbiAgICByZXR1cm4gY29udGFpbmVyO1xufSkoKTtcblxuZXhwb3J0IHtpbnB1dENvbnRhaW5lcn07IiwiY29uc3QgZ2V0V2VhdGhlckRhdGEgPSAoKCkgPT4ge1xuICBhc3luYyBmdW5jdGlvbiB3ZWF0aGVyRGF0YShjaXR5TmFtZSwgdW5pdCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICBgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L3dlYXRoZXI/cT0ke2NpdHlOYW1lfSZ1bml0cz0ke3VuaXR9JkFQUElEPSR7cHJvY2Vzcy5lbnYuQVBJX0tFWX1gLFxuICAgICAgICB7IG1vZGU6IFwiY29yc1wiIH1cbiAgICAgICk7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSA0MDQpIHtcbiAgICAgICAgY29uc3QganNvbkRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBqc29uRGF0YTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KFwiY2l0eSBub3QgZm91bmRcIik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgd2VhdGhlckRhdGEgfTtcbn0pKCk7XG5cbmNvbnN0IGdldEhvdXJseVdlYXRoZXJEYXRhID0gKCgpID0+IHtcbiAgYXN5bmMgZnVuY3Rpb24gaG91cmx5V2VhdGhlckRhdGEoY2l0eU5hbWUsIHVuaXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdD9xPSR7Y2l0eU5hbWV9JnVuaXRzPSR7dW5pdH0mYXBwaWQ9JHtwcm9jZXNzLmVudi5BUElfS0VZfWBcbiAgICAgICk7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSA0MDQpIHtcbiAgICAgICAgY29uc3QganNvbkRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBqc29uRGF0YTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KFwiY2l0eSBub3QgZm91bmRcIik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgaG91cmx5V2VhdGhlckRhdGEgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGdldFdlYXRoZXJEYXRhLCBnZXRIb3VybHlXZWF0aGVyRGF0YSB9O1xuIiwiY29uc3QgY3JlYXRlRWxlbWVudCA9ICh0YWdOYW1lLCBjbGFzc05hbWU9bnVsbCwgaWROYW1lPW51bGwsIHRleHQ9bnVsbCwgc3JjPW51bGwsIGFsdD1udWxsKT0+e1xuICAgIGlmKHRhZ05hbWUgPT09ICdpbnB1dCcpe1xuICAgICAgICByZXR1cm4gZWxlbWVudENyZWF0b3IuZm9ybUVsZW1lbnRDcmVhdG9yKHRhZ05hbWUsIGNsYXNzTmFtZSwgaWROYW1lLCB0ZXh0KTtcbiAgICB9ZWxzZSBpZih0YWdOYW1lICE9PSAnaW1nJyl7XG4gICAgICAgIHJldHVybiBlbGVtZW50Q3JlYXRvci5jcmVhdG9yKHRhZ05hbWUsIGNsYXNzTmFtZSwgaWROYW1lLCB0ZXh0KTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRDcmVhdG9yLmltYWdlRWxlbWVudENyZWF0b3IodGFnTmFtZSwgY2xhc3NOYW1lLCBpZE5hbWUsIHRleHQsIHNyYywgYWx0KTtcbiAgICB9XG59XG5cbmNvbnN0IGRpdlBhY2tlciA9ICh2YWx1ZXMsIGNsYXNzTmFtZT1udWxsLCBpZE5hbWU9bnVsbCk9PntcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaWYoY2xhc3NOYW1lICE9PSBudWxsKXtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIGlmKGlkTmFtZSAhPT0gbnVsbCl7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIGAke2lkTmFtZX1gKTtcbiAgICB9XG4gICAgdmFsdWVzLmZvckVhY2godmFsdWU9PntcbiAgICAgICAgY29uc3QgW3RhZ05hbWUsIGNsYXNzTmFtZSwgaWROYW1lLCB0ZXh0LCBzcmMsIGFsdF0gPSB2YWx1ZTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KHRhZ05hbWUsIGNsYXNzTmFtZSwgaWROYW1lLCB0ZXh0LCBzcmMsIGFsdCkpO1xuICAgIH0pO1xuICAgIHJldHVybiBlbGVtZW50O1xufVxuXG5jb25zdCBlbGVtZW50Q3JlYXRvciA9ICgoKT0+e1xuICAgIGNvbnN0IGNyZWF0b3IgPSAodGFnTmFtZSwgY2xhc3NOYW1lLCBpZE5hbWUsIHRleHQpPT57XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuICAgICAgICBpZihjbGFzc05hbWUgIT09IG51bGwpe1xuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaWROYW1lICE9PSBudWxsKXtcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIGAke2lkTmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZih0YWdOYW1lICE9PSAnaW5wdXQnKXtcbiAgICAgICAgICAgIGlmKHRhZ05hbWUgPT09ICdzcGFuJyl7XG4gICAgICAgICAgICAgICAgaWYodGV4dCAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gdGV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBpZih0ZXh0ICE9PSBudWxsKXtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBlbGVtZW50LnR5cGUgPSB0ZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIGNvbnN0IGltYWdlRWxlbWVudENyZWF0b3IgPSAodGFnTmFtZSwgY2xhc3NOYW1lLCBpZE5hbWUsIHRleHQsIHNyYywgYWx0KT0+e1xuICAgICAgICAvLyBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgICAgICAgLy8gaWYoYWx0ICE9PSBudWxsKXtcbiAgICAgICAgLy8gICAgIGVsZW1lbnQuYWx0ID0gYWx0O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8vIGlmKHNyYyAhPT0gbnVsbCl7XG4gICAgICAgIC8vICAgICBlbGVtZW50LnNyYyA9IHNyYztcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGNyZWF0b3IodGFnTmFtZSwgY2xhc3NOYW1lLCBpZE5hbWUsIHRleHQpO1xuICAgICAgICBpZihhbHQgIT09IG51bGwpe1xuICAgICAgICAgICAgZWxlbWVudC5hbHQgPSBhbHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYoc3JjICE9PSBudWxsKXtcbiAgICAgICAgICAgIGVsZW1lbnQuc3JjID0gc3JjO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIGNvbnN0IGZvcm1FbGVtZW50Q3JlYXRvciA9ICh0YWdOYW1lLCBjbGFzc05hbWUsIGlkTmFtZSwgdHlwZSk9PntcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGNyZWF0b3IodGFnTmFtZSwgY2xhc3NOYW1lLCBpZE5hbWUsIHR5cGUpO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICByZXR1cm4ge2NyZWF0b3IsIGltYWdlRWxlbWVudENyZWF0b3IsIGZvcm1FbGVtZW50Q3JlYXRvcn07XG59KSgpO1xuXG5leHBvcnQge2NyZWF0ZUVsZW1lbnQsIGRpdlBhY2tlcn07IiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgZGl2UGFja2VyIH0gZnJvbSBcIi4vZWxlbWVudF9jcmVhdG9yXCI7XG5pbXBvcnQgeyBnZXRIb3VybHlXZWF0aGVyRGF0YSB9IGZyb20gXCIuL3dlYXRoZXJEYXRhXCI7XG4vLyBpbXBvcnQgbG9hZGVySW1hZ2UgZnJvbSAnLi4vaW1hZ2VzL3dlYXRoZXJfbG9hZGVyLmdpZic7XG5cbmNvbnN0IHdlYXRoZXJDb250YWluZXIgPSAoKCkgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb250YWluZXIuaWQgPSBcIndlYXRoZXJDb250YWluZXJcIjtcblxuICBjb25zdCB3ZWF0aGVySGVhZGVyID0gZGl2UGFja2VyKFtbXCJwXCIsIFwiY2l0eU5hbWVcIl1dLCBcIndlYXRoZXItaGVhZGVyXCIpO1xuICBjb25zdCB1bml0VG9nZ2xlciA9IGRpdlBhY2tlcihcbiAgICBbXG4gICAgICBbXCJidXR0b25cIiwgXCJtZXRyaWNcIiwgbnVsbCwgXCJDXCJdLFxuICAgICAgW1wiYnV0dG9uXCIsIFwiaW1wZXJpYWxcIiwgbnVsbCwgXCJGXCJdLFxuICAgIF0sXG4gICAgXCJ1bml0c1wiXG4gICk7XG4gIHdlYXRoZXJIZWFkZXIuYXBwZW5kKHVuaXRUb2dnbGVyKTtcblxuICBjb25zdCB3ZWF0aGVyRGV0YWlscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHdlYXRoZXJEZXRhaWxzLmNsYXNzTmFtZSA9IFwid2VhdGhlci1kZXRhaWxzXCI7XG5cbiAgY29uc3Qgd2VhdGhlckltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgd2VhdGhlckltYWdlLmNsYXNzTmFtZSA9IFwid2VhdGhlci1pbWdcIjtcbiAgd2VhdGhlckltYWdlLnNyYyA9IFwiI1wiO1xuICB3ZWF0aGVyRGV0YWlscy5hcHBlbmRDaGlsZCh3ZWF0aGVySW1hZ2UpO1xuXG4gIGNvbnN0IG1haW5XZWF0aGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIG1haW5XZWF0aGVyLmNsYXNzTmFtZSA9IFwibWFpbi13ZWF0aGVyXCI7XG4gIHdlYXRoZXJEZXRhaWxzLmFwcGVuZENoaWxkKG1haW5XZWF0aGVyKTtcblxuICBjb25zdCBvdGhlcldlYXRoZXJEZXRhaWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgb3RoZXJXZWF0aGVyRGV0YWlscy5jbGFzc05hbWUgPSBcIm90aGVyLWRldGFpbHNcIjtcblxuICBjb25zdCB3ZWF0aGVyVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICB3ZWF0aGVyVGV4dC5jbGFzc05hbWUgPSBcIndlYXRoZXItdGV4dFwiO1xuICBvdGhlcldlYXRoZXJEZXRhaWxzLmFwcGVuZENoaWxkKHdlYXRoZXJUZXh0KTtcblxuICBjb25zdCBvdGhlcldlYXRoZXJJbmZvID0gZGl2UGFja2VyKFxuICAgIFtcbiAgICAgIFtcInBcIiwgXCJtYXgtdGVtcFwiLCBudWxsXSxcbiAgICAgIFtcInBcIiwgXCJtaW4tdGVtcFwiLCBudWxsXSxcbiAgICAgIFtcInBcIiwgXCJ2aXNpYmlsaXR5XCIsIG51bGxdLFxuICAgICAgW1wicFwiLCBcImh1bWlkaXR5XCIsIG51bGxdLFxuICAgIF0sXG4gICAgXCJvdGhlci13ZWF0aGVyLWluZm9cIlxuICApO1xuXG4gIGNvbnN0IGhvdXJseVdlYXRoZXJDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiaG91cmx5LXdlYXRoZXJcIik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgNDA7IGkrKykge1xuICAgIGNvbnN0IGhvdXJseVdlYXRoZXIgPSBkaXZQYWNrZXIoXG4gICAgICBbXG4gICAgICAgIFtcInBcIiwgXCJkYXlcIl0sXG4gICAgICAgIFtcImltZ1wiLCBcIndlYXRoZXItaW1nXCJdLFxuICAgICAgICBbXCJwXCIsIFwibWluLW1heFwiXSxcbiAgICAgICAgW1wicFwiLCBcImRlc2NcIl0sXG4gICAgICBdLFxuICAgICAgXCJob3VybHktd2VhdGhlci1cIiArIGlcbiAgICApO1xuICAgIGhvdXJseVdlYXRoZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoaG91cmx5V2VhdGhlcik7XG4gIH1cblxuICBjb25zdCBsb2FkZXJfaW1hZ2UgPSBjcmVhdGVFbGVtZW50KFwiaW1nXCIsIFwibG9hZGVyLWltYWdlXCIpO1xuXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWF0aGVySGVhZGVyKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHdlYXRoZXJEZXRhaWxzKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKG90aGVyV2VhdGhlckRldGFpbHMpO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQob3RoZXJXZWF0aGVySW5mbyk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChob3VybHlXZWF0aGVyQ29udGFpbmVyKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGxvYWRlcl9pbWFnZSk7XG5cbiAgcmV0dXJuIGNvbnRhaW5lcjtcbn0pKCk7XG5cbmV4cG9ydCB7IHdlYXRoZXJDb250YWluZXIgfTtcbiIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJiYjAzNmFhZjAzODhmMmQ5MGRmOWRiMTg1NTg0ODk0My5naWZcIjsiLCJpbXBvcnQgeyBpbnB1dENvbnRhaW5lciB9IGZyb20gXCIuL2lucHV0Q29udGFpbmVyXCI7XG5pbXBvcnQgeyBnZXRIb3VybHlXZWF0aGVyRGF0YSwgZ2V0V2VhdGhlckRhdGEgfSBmcm9tIFwiLi93ZWF0aGVyRGF0YVwiO1xuaW1wb3J0IHsgd2VhdGhlckNvbnRhaW5lciB9IGZyb20gXCIuL3dlYXRoZXJDb250YWluZXJcIjtcbmltcG9ydCAnLi4vc3R5bGVzL3N0eWxlLmNzcyc7XG5pbXBvcnQgbG9hZGVySW1hZ2UgZnJvbSAnLi4vaW1hZ2VzL2dpcmxfanVtcGluZy5naWYnO1xuXG5jb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRlbnQnKTtcblxuY29udGVudC5hcHBlbmRDaGlsZChpbnB1dENvbnRhaW5lcik7XG5jb250ZW50LmFwcGVuZENoaWxkKHdlYXRoZXJDb250YWluZXIpO1xuXG5jb25zdCBzZWFyY2hGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaXR5LWlucHV0Jyk7XG5jb25zdCBzZWFyY2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1zZWFyY2gnKTtcbmNvbnN0IG1haW5XZWF0aGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4td2VhdGhlcicpO1xuY29uc3QgbWFpbldlYXRoZXJJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyLWltZycpO1xuY29uc3QgdW5pdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1oZWFkZXI+LnVuaXRzJyk7XG5jb25zdCBjaXR5TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaXR5TmFtZScpO1xuY29uc3QgbG9hZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dlYXRoZXJDb250YWluZXI+LmxvYWRlci1pbWFnZScpO1xubG9hZGVyLnNyYyA9IGxvYWRlckltYWdlO1xuXG5sZXQgc2VsZWN0ZWRVbml0ID0ge3VuaXQ6ICdtZXRyaWMnLCBzeW1ib2w6ICdDJ307XG5cbnNlYXJjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgaWYoc2VhcmNoRmllbGQudmFsdWUgIT09ICcnKXtcbiAgICAgICAgZ2V0V2VhdGhlckRldGFpbHMoc2VhcmNoRmllbGQudmFsdWUsIHNlbGVjdGVkVW5pdC51bml0KTtcbiAgICAgICAgZ2V0SG91cmx5V2VhdGhlckRldGFpbHMoc2VhcmNoRmllbGQudmFsdWUsIHNlbGVjdGVkVW5pdC51bml0KTtcbiAgICB9ZWxzZXtcbiAgICAgICAgYWxlcnQoJ2NpdHkgbmFtZSBtdXN0IG5vdCBiZSBlbXB0eScpO1xuICAgIH1cbn0pXG5cbmNvbnN0IGRpc3BsYXlXZWF0aGVyRGV0YWlscyA9IChkYXRhLCB1bml0KT0+e1xuICAgIGNpdHlOYW1lLmlubmVySFRNTCA9IGAke2RhdGEubmFtZX08c3Bhbj4sICR7ZGF0YS5zeXMuY291bnRyeX08L3NwYW4+YDtcbiAgICBtYWluV2VhdGhlci5pbm5lckhUTUwgPSBgJHtkYXRhLm1haW4udGVtcH08c3BhbiBjbGFzcz0ndW5pdHMnPiYjMTc2OyR7dW5pdH08L3NwYW4+YDtcbiAgICBtYWluV2VhdGhlckltYWdlLnNyYyA9IGBodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93bi8ke2RhdGEud2VhdGhlclswXS5pY29ufUAyeC5wbmdgO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyLXRleHQnKS5pbm5lckhUTUwgPSBgRmVlbHMgbGlrZSAke2RhdGEubWFpbi5mZWVsc19saWtlfTxzcGFuPiYjMTc2OyR7dW5pdH08L3NwYW4+LiAke2RhdGEud2VhdGhlclswXS5kZXNjcmlwdGlvbn1gO1xuICAgIHVwZGF0ZU90aGVySW5mbyhkYXRhLCB1bml0KTtcbn1cblxuY29uc3QgdXBkYXRlT3RoZXJJbmZvID0gKGRhdGEsIHVuaXQpPT57XG4gICAgY29uc3Qgb3RoZXJJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm90aGVyLXdlYXRoZXItaW5mbz5wJyk7XG4gICAgY29uc3QgW21heFRlbXAsIG1pblRlbXAsIHZpc2liaWxpdHksIGh1bWlkaXR5XSA9IEFycmF5LmZyb20ob3RoZXJJbmZvKTtcbiAgICBtYXhUZW1wLmlubmVySFRNTCA9IGBNYXg6ICR7ZGF0YS5tYWluLnRlbXBfbWF4fTxzcGFuIGNsYXNzPSd1bml0cyc+JiMxNzY7JHt1bml0fTwvc3Bhbj5gO1xuICAgIG1pblRlbXAuaW5uZXJIVE1MID0gYE1pbjogJHtkYXRhLm1haW4udGVtcF9taW59PHNwYW4gY2xhc3M9J3VuaXRzJz4mIzE3Njske3VuaXR9PC9zcGFuPmA7XG4gICAgdmlzaWJpbGl0eS50ZXh0Q29udGVudCA9IGBWaXNpYmlsaXR5OiAke01hdGguZmxvb3IoZGF0YS52aXNpYmlsaXR5LzEwMDApfWttYDtcbiAgICBodW1pZGl0eS50ZXh0Q29udGVudCA9IGBIdW1pZGl0eTogJHtkYXRhLm1haW4uaHVtaWRpdHl9JWA7XG59XG5cbmNvbnN0IGdldFdlYXRoZXJEZXRhaWxzID0gKHZhbHVlLCB1bml0KT0+e1xuICAgIGxvYWRlci5jbGFzc0xpc3QuYWRkKCdzaG93X2xvYWRlcicpO1xuICAgIGdldFdlYXRoZXJEYXRhLndlYXRoZXJEYXRhKHZhbHVlLCB1bml0KVxuICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgZGlzcGxheVdlYXRoZXJEZXRhaWxzKGRhdGEsIHNlbGVjdGVkVW5pdC5zeW1ib2wpO1xuICAgICAgICBsb2FkZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2hvd19sb2FkZXInKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnI9PntcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxufVxuXG5jb25zdCBnZXRIb3VybHlXZWF0aGVyRGV0YWlscyA9ICh2YWx1ZSwgdW5pdCk9PntcbiAgICBnZXRIb3VybHlXZWF0aGVyRGF0YS5ob3VybHlXZWF0aGVyRGF0YSh2YWx1ZSwgdW5pdClcbiAgICAudGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YS5saXN0KTtcbiAgICAgICAgZGlzcGxheUhvdXJseVdlYXRoZXJEZXRhaWxzKGRhdGEubGlzdCwgc2VsZWN0ZWRVbml0LnN5bWJvbCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyPT57XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbn1cblxuY29uc3QgZGlzcGxheUhvdXJseVdlYXRoZXJEZXRhaWxzID0gKGRhdGEsIHVuaXQpPT57XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhvdXJseS13ZWF0aGVyPmRpdicpLmZvckVhY2goZGl2PT57XG4gICAgICAgIGxldCBjdXJyZW50QXJyYXkgPSBOdW1iZXIoZGl2LmNsYXNzTmFtZS5zbGljZSgtMSkpO1xuICAgICAgICBjb25zdCBbZGF5LCBpbWFnZSwgd2VhdGhlciwgd2VhdGhlckRlc2NdID0gQXJyYXkuZnJvbShkaXYuY2hpbGROb2Rlcyk7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRhW2N1cnJlbnRBcnJheV0uZHQgKiAxMDAwKTtcbiAgICAgICAgZGF5LnRleHRDb250ZW50ID0gZGF0ZS50b0RhdGVTdHJpbmcoKS5yZXBsYWNlKCcyMDIzJywgJycpO1xuXG4gICAgICAgIGltYWdlLnNyYyA9IGBodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93bi8ke2RhdGFbY3VycmVudEFycmF5XS53ZWF0aGVyWzBdLmljb259LnBuZ2A7XG5cbiAgICAgICAgd2VhdGhlci5pbm5lckhUTUwgPSBgJHtkYXRhW2N1cnJlbnRBcnJheV0ubWFpbi50ZW1wfTxzcGFuPiYjMTc2OyR7dW5pdH08L3NwYW4+YDtcblxuICAgICAgICB3ZWF0aGVyRGVzYy50ZXh0Q29udGVudCA9IGRhdGFbY3VycmVudEFycmF5XS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uO1xuICAgIH0pXG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCk9PntcbiAgICBnZXRXZWF0aGVyRGV0YWlscygnbG9uZG9uJywgc2VsZWN0ZWRVbml0LnVuaXQpO1xuICAgIGdldEhvdXJseVdlYXRoZXJEZXRhaWxzKCdsb25kb24nLCBzZWxlY3RlZFVuaXQudW5pdCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRzPi5tZXRyaWMnKS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xufSlcblxudW5pdHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PntcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudW5pdHM+YnV0dG9uJykuZm9yRWFjaChidXR0b249PntcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG4gICAgfSk7XG4gICAgc2VsZWN0ZWRVbml0LnVuaXQgPSBlLnRhcmdldC5jbGFzc05hbWU7XG4gICAgbGV0IG5hbWUgPSBjaXR5TmFtZS50ZXh0Q29udGVudC5zcGxpdCgnLCcpO1xuICAgIGdldFdlYXRoZXJEZXRhaWxzKG5hbWVbMF0sIHNlbGVjdGVkVW5pdC51bml0KTtcbiAgICBnZXRIb3VybHlXZWF0aGVyRGV0YWlscyhuYW1lWzBdLCBzZWxlY3RlZFVuaXQudW5pdCk7XG4gICAgaWYoZS50YXJnZXQuY2xhc3NOYW1lID09PSAnbWV0cmljJyl7XG4gICAgICAgIHNlbGVjdGVkVW5pdC5zeW1ib2wgPSAnQyc7XG4gICAgfWVsc2V7XG4gICAgICAgIHNlbGVjdGVkVW5pdC5zeW1ib2wgPSAnRic7XG4gICAgfVxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG59KVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiaW5wdXRDb250YWluZXIiLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJpbnB1dEZpZWxkIiwidHlwZSIsImNsYXNzTmFtZSIsIm5hbWUiLCJhcHBlbmRDaGlsZCIsImJ1dHRvbiIsInRleHRDb250ZW50IiwiZ2V0V2VhdGhlckRhdGEiLCJ3ZWF0aGVyRGF0YSIsImFzeW5jIiwiY2l0eU5hbWUiLCJ1bml0IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1vZGUiLCJzdGF0dXMiLCJqc29uIiwiYWxlcnQiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJnZXRIb3VybHlXZWF0aGVyRGF0YSIsImhvdXJseVdlYXRoZXJEYXRhIiwidGFnTmFtZSIsImlkTmFtZSIsInRleHQiLCJhbHQiLCJlbGVtZW50Q3JlYXRvciIsImZvcm1FbGVtZW50Q3JlYXRvciIsImNyZWF0b3IiLCJpbWFnZUVsZW1lbnRDcmVhdG9yIiwiZGl2UGFja2VyIiwidmFsdWVzIiwiZWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImZvckVhY2giLCJ2YWx1ZSIsImlubmVySFRNTCIsIndlYXRoZXJDb250YWluZXIiLCJ3ZWF0aGVySGVhZGVyIiwidW5pdFRvZ2dsZXIiLCJhcHBlbmQiLCJ3ZWF0aGVyRGV0YWlscyIsIndlYXRoZXJJbWFnZSIsIm1haW5XZWF0aGVyIiwib3RoZXJXZWF0aGVyRGV0YWlscyIsIndlYXRoZXJUZXh0Iiwib3RoZXJXZWF0aGVySW5mbyIsImhvdXJseVdlYXRoZXJDb250YWluZXIiLCJpIiwiaG91cmx5V2VhdGhlciIsImxvYWRlcl9pbWFnZSIsImNvbnRlbnQiLCJxdWVyeVNlbGVjdG9yIiwic2VhcmNoRmllbGQiLCJzZWFyY2hCdXR0b24iLCJtYWluV2VhdGhlckltYWdlIiwidW5pdHMiLCJsb2FkZXIiLCJzZWxlY3RlZFVuaXQiLCJzeW1ib2wiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2V0V2VhdGhlckRldGFpbHMiLCJnZXRIb3VybHlXZWF0aGVyRGV0YWlscyIsInVwZGF0ZU90aGVySW5mbyIsImRhdGEiLCJvdGhlckluZm8iLCJxdWVyeVNlbGVjdG9yQWxsIiwibWF4VGVtcCIsIm1pblRlbXAiLCJ2aXNpYmlsaXR5IiwiaHVtaWRpdHkiLCJBcnJheSIsImZyb20iLCJtYWluIiwidGVtcF9tYXgiLCJ0ZW1wX21pbiIsIk1hdGgiLCJmbG9vciIsInRoZW4iLCJzeXMiLCJjb3VudHJ5IiwidGVtcCIsIndlYXRoZXIiLCJpY29uIiwiZmVlbHNfbGlrZSIsImRlc2NyaXB0aW9uIiwiZGlzcGxheVdlYXRoZXJEZXRhaWxzIiwicmVtb3ZlIiwiY2F0Y2giLCJlcnIiLCJkaXNwbGF5SG91cmx5V2VhdGhlckRldGFpbHMiLCJsaXN0IiwiZGl2IiwiY3VycmVudEFycmF5IiwiTnVtYmVyIiwic2xpY2UiLCJkYXkiLCJpbWFnZSIsIndlYXRoZXJEZXNjIiwiY2hpbGROb2RlcyIsImRhdGUiLCJEYXRlIiwiZHQiLCJ0b0RhdGVTdHJpbmciLCJ0YXJnZXQiLCJzcGxpdCJdLCJzb3VyY2VSb290IjoiIn0=